unit Classe.Produto;

interface
uses
  System.SysUtils, Classe.Functions, Classe.FunctionsCrud,Classe.FunctionsSQL,
  Classe.Conexao, Vcl.Forms, JvDBUltimGrid, System.Classes, System.Variants,
  Graphics, Vcl.WinXPanels, System.Math, JvDesktopAlert, Classe.Sistema.Mensagens,
  Vcl.Dialogs, JvCombobox, FireDAC.Comp.Client, Data.DB, System.UITypes,
  Vcl.StdCtrls, Winapi.Windows, Vcl.DBGrids, Vcl.Grids;


type
    Tproduto = class
    private
    FIdProduto: Integer;
    FNome: string;
    FFabricante: string;
    FTipo: string;
    procedure SetIdProduto(const Value: Integer);
    procedure SetNome(const Value: string);
    procedure SeFabricante(const Value: string);
    procedure SetTipo(const Value: string);

    public

    constructor CreateObjTProduto;
    destructor  DestroyObjTProduto;
        procedure setPesquisaCampo(Campo: string; Key: string);
        procedure setAcaoAdicionarEditar(ActInsUpd: string);
        procedure setFrmOnShow;
        procedure setDelete;
        function  getSavar: Boolean;
        function  getCancelar: Boolean;

    published
        property IdProduto: Integer read FIdProduto write SetIdProduto;
        property Nome: string read FNome write SetNome;
        property Tipo: string read FTipo write SetTipo;
        property Fabricante: string read FFabricante write SeFabricante;

end;
Var
        Frm                  : TForm;
        Dbgrd                : TJvDBUltimGrid;
        DbgrdTecGenetica     : TJvDBUltimGrid;
        RadioBasica          : TRadioButton;
        RadioFull            : TRadioButton;
        Table                : string;
        IDKey                : string;
        IDKeyVaue            : string;
        IDKeyFilter          : string;
        NCampos              : Integer;
        InsUpd               : string;
        FAlert               : string;

implementation

uses
     UFrmCadastroProduto;

{ Tproduto }

constructor Tproduto.CreateObjTProduto;
begin
        Frm              := FrmCadastroProduto;
        Dbgrd            := FrmCadastroProduto.DbGrid;
        RadioBasica      := FrmCadastroProduto.RbConsBasica;
        RadioFull        := FrmCadastroProduto.RbConsFull;
        Table            := 'produto';
        IDKey            := ' prd_idproduto = ';
        IDKeyVaue        := 'prd_idproduto';
        IDKeyFilter      := 'prd_nome LIKE ';
        NCampos          := 3;
        InsUpd           := EmptyStr;

end;

destructor Tproduto.DestroyObjTProduto;
begin

end;

function Tproduto.getCancelar: Boolean;
begin
        Result := fEventoCancelar(Frm, Dbgrd, Table, IDKeyVaue, NCampos);
        plimpaDadosInterface(Frm, 1);
        setFrmOnShow;
end;

function Tproduto.getSavar: Boolean;
begin

end;

procedure Tproduto.SeFabricante(const Value: string);
begin
  FFabricante := Value;
end;

procedure Tproduto.setAcaoAdicionarEditar(ActInsUpd: string);
begin

end;

procedure Tproduto.setDelete;
begin

end;

procedure Tproduto.setFrmOnShow;
begin

end;

procedure Tproduto.SetIdProduto(const Value: Integer);
begin
  FIdProduto := Value;
end;

procedure Tproduto.SetNome(const Value: string);
begin
  FNome := Value;
end;

procedure Tproduto.setPesquisaCampo(Campo, Key: string);
var
  VlrBusca: string;
begin
  VlrBusca := EmptyStr;
  if Key = '13' then
  begin
    if RadioBasica.Checked then
    begin
      VlrBusca := '%' + Campo;
    end
    else if RadioFull.Checked then
    begin
      VlrBusca := '%' + Campo + '%';
    end
    else
    begin
      VlrBusca := Campo;
    end;

    fEventoConsultaQuery(VlrBusca, Table, IDKeyFilter, IDKeyVaue, NCampos);
    pAtivarDBGrid(Dbgrd);
  end;


end;

procedure Tproduto.SetTipo(const Value: string);
begin
  FTipo := Value;
end;

end.
